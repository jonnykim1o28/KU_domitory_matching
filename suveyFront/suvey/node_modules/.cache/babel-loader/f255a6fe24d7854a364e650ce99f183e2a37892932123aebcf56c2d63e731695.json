{"ast":null,"code":"import React from \"react\";\nconst API_BASE_URL = \"http://localhost:8080\";\nexport async function call(api, method, request) {\n  let headers = new Headers({\n    \"Content-Type\": \"application/json\"\n  });\n\n  // 로컬 스토리지에서 ACCESS TOKEN 가져오기\n  const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n  if (accessToken && accessToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  let options = {\n    headers: headers,\n    url: API_BASE_URL + api,\n    method: method\n  };\n  if (request) {\n    options.body = JSON.stringify(request);\n  }\n  try {\n    const response = await fetch(options.url, options);\n    let result = {\n      status: response.status\n    }; // 항상 status 필드를 포함\n    console.log(\"Http status : \" + response.status);\n    if (response.ok) {\n      try {\n        const text = await response.text(); // 응답 body 가져오기\n        if (text) {\n          const parsedData = JSON.parse(text); // JSON 파싱\n          Object.assign(result, parsedData); // result에 데이터 병합\n        }\n      } catch (e) {\n        throw new Error(\"JSON 파싱 실패: \" + e.message);\n      }\n    } else if (response.status === 404 || response.status === 403) {\n      window.location.href = \"/signin\"; // redirect\n    } else {\n      const errorData = await response.text(); // 에러 메시지 가져오기\n      result.error = `HTTP 에러 발생: ${errorData}`;\n    }\n    return result;\n  } catch (error) {\n    console.error(\"HTTP 요청 중 오류 발생:\", error);\n    throw error; // 에러를 호출자에게 전달\n  }\n}\nexport function signin(userDTO) {\n  return call(\"/auth/signin\", \"POST\", userDTO).then(response => {\n    console.log(\"Api SignIn : \" + response);\n    if (response.status === 400) {\n      return response;\n    } else if (response.token) {\n      console.log(response);\n      localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n      return response;\n    }\n  });\n}\nexport function signout() {\n  localStorage.setItem(\"ACCESS_TOKEN\", null);\n  window.location.href = \"/signin\";\n}\nexport function signup(userDTO) {\n  return call(\"/auth/signup\", \"POST\", userDTO);\n}\nexport function writeContent() {\n  window.location.href = \"/write\";\n}\nexport function checkNickname(nickname) {\n  return call(`/auth/nicknameCheck?nickname=${nickname}`, \"GET\", null);\n}\nexport function saveLink(link) {\n  return call(\"/suvey\", \"POST\", link);\n}\nexport function deleteLink(item) {\n  return call(\"/suvey\", \"DELETE\", item);\n}\nexport function deleteGroup(groupDTO) {\n  console.log(groupDTO);\n  return call(\"/suvey/group\", \"DELETE\", groupDTO);\n}\nexport function saveNote(item) {\n  return call(\"/suvey\", \"PUT\", item);\n}\nexport function updateGroupTitle(item) {\n  return call(\"/suvey/group\", \"PUT\", item);\n}\nexport function search(option, query) {\n  // option에 따라 다른 필드에서 검색\n  return call(`/suvey/group/search?field=${option}&query=${query}`, \"GET\", null);\n}\nexport function sendCodeToEmail(email) {\n  return call(`/auth/emails/verification-requests?email=${email}`, \"POST\", null);\n}\nexport function verificationEmail(email, code) {\n  return call(`/suvey/auth/emails/verifications?email=${email}&code=${code}`, \"POST\", null);\n}","map":{"version":3,"names":["React","API_BASE_URL","call","api","method","request","headers","Headers","accessToken","localStorage","getItem","append","options","url","body","JSON","stringify","response","fetch","result","status","console","log","ok","text","parsedData","parse","Object","assign","e","Error","message","window","location","href","errorData","error","signin","userDTO","then","token","setItem","signout","signup","writeContent","checkNickname","nickname","saveLink","link","deleteLink","item","deleteGroup","groupDTO","saveNote","updateGroupTitle","search","option","query","sendCodeToEmail","email","verificationEmail","code"],"sources":["/Users/jonnykim/suvey/suveyFront/suvey/src/api/ApiService.js"],"sourcesContent":["import React from \"react\";\n\nconst API_BASE_URL = \"http://localhost:8080\";\n\nexport async function call(api, method, request) {\n    let headers = new Headers({\n        \"Content-Type\": \"application/json\",\n    });\n\n    // 로컬 스토리지에서 ACCESS TOKEN 가져오기\n    const accessToken = localStorage.getItem(\"ACCESS_TOKEN\");\n    if (accessToken && accessToken !== null) {\n        headers.append(\"Authorization\", \"Bearer \" + accessToken);\n    }\n\n    let options = {\n        headers: headers,\n        url: API_BASE_URL + api,\n        method: method,\n    };\n\n    if (request) {\n        options.body = JSON.stringify(request);\n    }\n\n    try {\n        const response = await fetch(options.url, options);\n        let result = { status: response.status }; // 항상 status 필드를 포함\n        console.log(\"Http status : \" + response.status);\n\n        if (response.ok) {\n            try {\n                const text = await response.text(); // 응답 body 가져오기\n                if (text) {\n                    const parsedData = JSON.parse(text); // JSON 파싱\n                    Object.assign(result, parsedData); // result에 데이터 병합\n                }\n            } catch (e) {\n                throw new Error(\"JSON 파싱 실패: \" + e.message);\n            }\n        } else if (response.status === 404 || response.status === 403) {\n            window.location.href = \"/signin\"; // redirect\n        } else {\n            const errorData = await response.text(); // 에러 메시지 가져오기\n            result.error = `HTTP 에러 발생: ${errorData}`;\n        }\n\n        return result;\n\n    } catch (error) {\n        console.error(\"HTTP 요청 중 오류 발생:\", error);\n        throw error; // 에러를 호출자에게 전달\n    }\n}\n\n\n\nexport function signin(userDTO) {\n    return call(\"/auth/signin\",\"POST\", userDTO)\n    .then((response) => {\n        console.log(\"Api SignIn : \" + response);\n\n        if(response.status === 400){\n            return response;\n        }\n        else if(response.token){\n            console.log(response);\n            localStorage.setItem(\"ACCESS_TOKEN\", response.token);\n            return response;\n\n        }\n    })\n }\n\nexport function signout() {\n    localStorage.setItem(\"ACCESS_TOKEN\",null);\n    window.location.href = \"/signin\";\n}\n\nexport function signup(userDTO){\n    return call(\"/auth/signup\",\"POST\",userDTO)\n}\n\nexport function writeContent(){\n    window.location.href = \"/write\";\n}\n\nexport function checkNickname(nickname) {\n    return call(`/auth/nicknameCheck?nickname=${nickname}`,\"GET\",null);\n}\n\nexport function saveLink(link) {\n    return call(\"/suvey\",\"POST\",link);\n}\n\nexport function deleteLink(item) {\n    return call(\"/suvey\",\"DELETE\",item);\n}\n\nexport function deleteGroup(groupDTO) {\n    console.log(groupDTO);\n    return call(\"/suvey/group\",\"DELETE\",groupDTO);\n}\n\nexport function saveNote(item){\n    return call(\"/suvey\",\"PUT\",item);\n}\n\nexport function updateGroupTitle(item){\n    return call(\"/suvey/group\",\"PUT\",item);\n}\n\nexport function search(option, query) {\n    // option에 따라 다른 필드에서 검색\n    return call(`/suvey/group/search?field=${option}&query=${query}`, \"GET\", null);\n  }\n  \nexport function sendCodeToEmail(email){\n    return call(`/auth/emails/verification-requests?email=${email}`,\"POST\",null);\n}\n\nexport function verificationEmail(email, code){\n    return call(`/suvey/auth/emails/verifications?email=${email}&code=${code}`,\"POST\",null);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}